
\subsection{Catalan triangle, by Shapiro}

The very first work that allows researchers to develop the theory of
\emph{Riordan arrays} is the one by \citeauthor{shapiro:1976}
\cite{shapiro:1976}. In his article, he builds the following triangle, called
\emph{Catalan} because of its relation with \emph{Catalan} numbers in the first
column:
\begin{equation}
    \begin{array}{c|ccccccc}
        n\diagdown k & 1 & 2 & 3 & 4 & 5 & 6&\ldots\\
        \hline
        1&1 & & & & & &\\
        2&2 &1 & & & & &\\
        3&5 &4 &1 & & & &\\
        4&14 &14 &6 &1 & & &\\
        5&42 &48 &27 &8 &1 & &\\
        6&132 &165 &110 &44 &10 &1& \\
        \vdots&\vdots&\vdots&\vdots&\vdots&\vdots&\vdots&\ddots \\
    \end{array}
\end{equation}

Such a triangle counts the pairs of \emph{non-intersecting} paths, in an
integral lattice domain, of length $n$ with distance $k$. This interpretation
would allow us to give meaning to other triangles, 
%one of them is generated by the \emph{Riordan array} $\mathcal{C}$, 
therefore we formalize it a little more.

A path $\vect{\rho}$ of length $n$ is a sequence $(\rho_{0},\rho_{1},\ldots,\rho_{n-1})$,
where each $\rho_{i}$ is a pair $(a_{i},b_{i})$ of natural numbers, such that:
\marginpar{Path definition, \emph{upwards} and \emph{rightward} steps}
\begin{displaymath}
    (\rho_{i},\rho_{i+1})\subset\vect{\rho} \leftrightarrow
    (\rho_{i+1}=(a_{i}+1,b_{i})) \vee 
    (\rho_{i+1}=(a_{i},b_{i}+1)) 
\end{displaymath}
the first term in the \ac{rhs} denotes a \emph{west-east} step, while the second
term denotes a \emph{south-north} step. Two paths $\vect{\rho}$ and $\vect{\sigma}$
\emph{intersect} after $j$ steps if $\rho_{j}=\sigma_{j}$. Moreover, they have distance
$d$ if $\left|\rho_{n-1}^{(1)}-\sigma_{n-1}^{(1)}\right|=d$, where $\gamma_{j}^{(1)}$ is
the first component of a generic pair $\gamma_{j}$, for each $j\in\lbrace0,\ldots,n-1\rbrace$.

\citeauthor{shapiro:1976} observes a recurrence relation over elements in the triangle.
Denote with $d_{nk}$ such an element, then the following holds:
\marginpar{$A(t)=1+2t+t^{2}$ is the $A$-sequence of this triangle, as we will soon see}
\begin{displaymath}
    d_{nk}=d_{n-1,k-1}+2\,d_{n-1,k}+d_{n-1,k+1}
\end{displaymath}
Using this recurrence, he proposes a closed formula for element $d_{nk}$, found by 
``trial and error'' as he says:
\begin{displaymath}
    d_{nk}=\frac{k}{n}{{2n}\choose{n-k}}
\end{displaymath}
\emph{verifying} that it satisfies the given characterizing recurrence, giving
no \emph{constructive} proof at all. Since the $j$-th Catalan number $c_{j}$ is $d_{j1}$,
another closed formula for $c_{j}$ pops out:
\begin{displaymath}
    c_{j}=\frac{1}{j}{{2j}\choose{j-1}}
\end{displaymath}
and, by combinatorial interpretation of $d_{nk}$, $c_j$ is the number of pairs
of \emph{non-intersecting} path of length $j$ with distance $1$. Using path definition,
and the \emph{intersect} property on a pair of paths, it is possible to give another
combinatorial interpretation to $c_{j}$:
\marginpar{another combinatorial interpretation for the Catalan numbers}
\begin{quote}
    \emph{$c_j$ counts pairs of paths that intersect, \\
    \indent for the \emph{first} time, at step $j+1$ }
\end{quote}
\begin{proof}
    Let $\vect{\rho}$ and $\vect{\sigma}$ be two paths. Proceed by 
    induction on length $j$:
    \begin{itemize}
        \item base $j=1$. Since paths are \emph{non-intersecting}, without loss
            of generality, let $\vect{\rho}=((1,0))$ and $\vect{\sigma}=((0,1))$.
            There is only one combination to have $\vect{\rho}$ and $\vect{\sigma}$
            intersect at step $2$, namely $\vect{\rho}$ has to move upwards and
            $\vect{\sigma}$ has to move rightwards. Therefore there are $c_{1}=1$ pairs
            of paths that intersect, for the \emph{first} time, at step $2$; 
        \item assume that $c_j$ counts pairs of paths that intersect, 
            for the \emph{first} time, at step $j+1$; then show for $c_{j+1}$. 
            According this hypothesis, paths $\vect{\rho}$ and $\vect{\sigma}$ 
            do not intersect until step $j+1$, therefore one of them is \emph{above}
            the other one for the first $j$ steps. 
            Without loss of generality, let $\vect{\rho}$ be the higher one. So, 
            $\vect{\rho}$ can be written, for some natural numbers $a$ and $b$, as:
            \begin{displaymath}
                \vect{\rho}=(\rho_{0},\rho_{1},\ldots,\rho_{j-2},(a, b))
            \end{displaymath}
            and $\vect{\sigma}$ can be written as:
            \begin{displaymath}
                \vect{\sigma}=(\sigma_{0},\sigma_{1},\ldots,\sigma_{j-2},(a+1, b-1))
            \end{displaymath}
            Do one more step which keeps distance $1$. Both paths have to move
            either upwards, and in this case they can be written as:
            \begin{displaymath}
                \begin{split}
                    \vect{\rho}&=(\rho_{0},\rho_{1},\ldots,\rho_{j-2},(a, b),(a, b+1))\\
                    \vect{\sigma}&=(\sigma_{0},\sigma_{1},\ldots,\sigma_{j-2},(a+1,b-1), (a+1, b))
                \end{split}
            \end{displaymath}
            or rightwards, and in this case they can be written as:
            \begin{displaymath}
                \begin{split}
                    \vect{\rho}&=(\rho_{0},\rho_{1},\ldots,\rho_{j-2},(a, b),(a+1, b))\\
                    \vect{\sigma}&=(\sigma_{0},\sigma_{1},\ldots,\sigma_{j-2},(a+1,b-1),(a+2, b-1))
                \end{split}
            \end{displaymath}
            in both cases, there is only one combination that make $\vect{\rho}$ and $\vect{\sigma}$
            intersect at step $j+2$, namely $\vect{\rho}$ has to move rightward and $\vect{\sigma}$
            has to move upwards. Therefore $c_{j+1}$ counts pairs of paths that intersect,
            for the \emph{first} time, at step $j+2$, as required.
            
                 
    \end{itemize}
\end{proof}

Another interesting observation of \citeauthor{shapiro:1976} is about the computation
of \emph{row sums}. Choose a row $n$, then: 
\marginpar{row sums: $s_{n}$ is the number of \emph{non-intersecting} pairs of 
    paths of length $n$, no matter the distance between them}
\begin{displaymath}
    \sum_{k=1}^{n}{d_{nk}}=s_{n}
\end{displaymath}
and he shows that $s_{n}$ satisfies:
\begin{displaymath}
    s_{n}=\frac{1}{2}{{2n}\choose{n}}
\end{displaymath}
again, \emph{verifying} it against the following recurrence, without giving a \emph{constructive} proof:
\begin{displaymath}
    s_{n}=4\,s_{n-1}-c_{n-1}
\end{displaymath}
\marginpar{\emph{verifying} against a recurrence relation, again}
The recurrence holds because $s_{n}$ denotes the number of
\emph{non-intersecting} paths of length $n$ and, since two paths can be
extended in $4$ ways, then we've to remove all of them that intersect after the
extension, which are $c_{n-1}$ in number.

Another interesting observation is the following recurrence:
\begin{displaymath}
    d_{nk}=\sum_{j=1}^{n-k+1}{d_{n-j,k-1}c_{j}}
\end{displaymath}

\begin{proof}
    If two \emph{non-intersecting} paths have distance $k$ then there
    exists $j\in\mathbb{N}$ such that, at step $n-j$, they have distance 
    $k-1$ for the last time. For the remaining $j$ steps, starting from
    step $n-j+1$ to step $n$, the two paths have to be extended so as to keep
    distance at least $k$ and, at step $n$, distance has to be $k$ exactly.
    One way to do this extensions is to apply the same sequence of steps to both paths,
    which keep distance $k$ for all the remaining $j$ steps, which is the same to say
    that paths can be extended in $c_{j}$ ways.
\end{proof}

Previous recurrence is important when it is used to characterize columns. Take the second
column, so let $k=2$:
\marginpar{$2$-fold convolution of function $C$ with itself}
\begin{displaymath}
    d_{n,2}=\sum_{j=1}^{n-1}{d_{n-j,1}c_{j}}
           =\sum_{j=1}^{n-1}{c_{n-j}c_{j}}
           =[t^{n}]C(t)^{2}-c_{0}c_{n}
           =[t^{n}]C(t)^{2}
\end{displaymath}
where $C(t)=t+2t^{2}+5t^{3}+14t^{4}+42t^{5}+132t^{6}+\mathcal{O}(t^{7})$ is the
\ac{fps} for the Catalan numbers, shifted by one place, so $c_{0}=0$.

Take the third column, so let $k=3$:
\marginpar{$3$-fold convolution of function $C$ with itself}
\begin{displaymath}
    \begin{split}
        d_{n,3}&=\sum_{j=1}^{n-2}{d_{n-j,2}c_{j}}
               =\sum_{j=1}^{n-2}{\left(\sum_{i=1}^{n-j-1}{d_{n-j-i,1}c_{i}}\right)c_{j}}\\
               &=\sum_{j=1}^{n-2}{\sum_{i=1}^{n-j-1}{c_{n-j-i}c_{i}}c_{j}}
               =\sum_{i+j+l=n}{c_{i}c_{j}c_{l}}
               =[t^{n}]C(t)^{3}
    \end{split}
\end{displaymath}

So, take any column $k$, then coefficients lying on it are coefficients
of the $k$-fold convolution of function $C$ with itself.
\\\\
Finally, \citeauthor{shapiro:1976} asks the following question:
\begin{quote}
    \emph{Is there a theory of arithmetic triangles where a simple function
    of the generating function (or \ac{fps}) of the first column yields
    the generating function (or \ac{fps}) of the $n$-th column?}
\end{quote}
Rogers found such a theory, as we will see in the next section.










